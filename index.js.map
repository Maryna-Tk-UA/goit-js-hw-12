{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"51359402-e1cf81f867165d4b6bb985455\";\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page\n        };\n\n   try {\n\n     const { data } = await axios(BASE_URL, { params });\n\n    return data;\n\n   } catch(error) {\n        throw error;\n   }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const refs = {\n  btnLoadMore: document.querySelector(\".js-load-more\"),\n}\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loader = document.querySelector('.container-loader');\n\nexport function createGallery(images) {\n        const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n          <a href=\"${largeImageURL}\" class=\"gallery-item\">\n          <div class=\"img-container\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-item-img\" width=\"360\">\n        </div>\n        <ul class=\"descr-list\">\n          <li class=\"descr-list-item\">\n            <h3 class=\"title-item\">Likes</h3>\n            <p class=\"text-item\">${likes}</p>\n          </li>\n          <li class=\"descr-list-item\">\n            <h3 class=\"title-item\">Views</h3>\n            <p class=\"text-item\">${views}</p>\n          </li>\n          <li class=\"descr-list-item\">\n            <h3 class=\"title-item\">Comments</h3>\n            <p class=\"text-item\">${comments}</p>\n          </li>\n          <li class=\"descr-list-item\">\n            <h3 class=\"title-item\">Downloads</h3>\n            <p class=\"text-item\">${downloads}</p>\n          </li>\n        </ul>\n      </a>\n    `).join(\"\");\n\n    galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n     galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.add('is-active');\n}\n\nexport function hideLoader() {\nloader.classList.remove('is-active');\n}\n\nexport function hideLoadMoreButton() {\n  refs.btnLoadMore.classList.add('js-load-more-hidden');\n}\n\nexport function showLoadMoreButton() {\n  refs.btnLoadMore.classList.remove('js-load-more-hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\n\nimport {getImagesByQuery} from \"./js/pixabay-api\";\nimport {createGallery, \n        clearGallery, \n        showLoader, \n        hideLoader, \n        showLoadMoreButton, \n        hideLoadMoreButton,\n        refs\n    } from \"./js/render-functions\";\n\n    let page = 1;\n    const perPage = 15;\n    let currentQuery = \"\";\n    let totalPages = 0;\n\nform.addEventListener(\"submit\", handleClick);\n\n async function handleClick(event) {\n  event.preventDefault();\n\n  currentQuery = event.target.elements['search-text'].value.trim();\n  \n  showLoader(); \n  hideLoadMoreButton();\n  clearGallery();\n\n  if(currentQuery === \"\") {\n    hideLoader();\n    iziToast.error({\n           message: \"The search field cannot be empty\",\n            position: 'topRight',\n            backgroundColor: '#c30d7dff',\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/error.svg', import.meta.url).href,\n            close: false\n        })\n        return;\n  }\n  try {\n\n    const data = await getImagesByQuery(currentQuery, page);\n\n    if(data.hits.length === 0) {\n      iziToast.warning({\n           message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            backgroundColor: '#c30d7dff',\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/error.svg', import.meta.url).href,\n            close: false\n        })\n        return;\n    }\n\n    createGallery(data.hits);\n\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    if(data.hits.length < perPage || page >= totalPages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n           message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            backgroundColor: '#5f9ae8ff',\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/wink.svg', import.meta.url).href,\n            close: false\n        })\n    }\n\n  } catch(error) {\n      iziToast.error({\n           message: `Error: ${error.message}`,\n            position: 'topRight',\n            backgroundColor: '#c30d7dff',\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/error.svg', import.meta.url).href,\n            close: false\n        })\n  } finally {\n    hideLoader();\n  }\n  \n}\n\nrefs.btnLoadMore.addEventListener(\"click\", loadMoreHandler);\n\nasync function loadMoreHandler() {\n  page++;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    createGallery(data.hits);\n    \n    if(data.hits.length < perPage || page >= totalPages) {\n      \n      showLoadMoreButton();\n      \n    } else {\n       iziToast.info({\n           message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            backgroundColor: \"#5f9ae8ff\",\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/wink.svg', import.meta.url).href,\n            close: false\n        })\n    }\n\n    const card = document.querySelector(\".gallery-item\");\n    const cardSize = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardSize * 2,\n      behavior: \"smooth\"\n    })\n\n  } catch(error) {\n      iziToast.warning({\n           message: `Error: ${error.message}`,\n            position: 'topRight',\n            backgroundColor: '#c30d7dff',\n            progressBar: false,\n            messageColor: \"white\",\n            icon: \"\",\n            iconUrl: new URL('./img/error.svg', import.meta.url).href,\n            close: false\n        })\n  } finally {\n    hideLoader();\n  }\n  \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// function handleClick(event) {\n//     event.preventDefault();\n    \n//     const inputValue = event.target.elements['search-text'].value.trim();\n    \n//     if(inputValue === \"\") {\n//           iziToast.error({\n//            message: \"The search field cannot be empty\",\n//             position: 'topRight',\n//             backgroundColor: '#ef4040',\n//             progressBar: false,\n//             messageColor: \"white\",\n//             icon: \"\",\n//             iconUrl: new URL('./img/error.svg', import.meta.url).href,\n//             close: false\n//         })\n        \n//         return;\n//     }\n\n//    clearGallery();\n//    showLoader();\n   \n\n//     getImagesByQuery(inputValue)\n//   .then(data => {\n//     if(data.hits.length === 0) {\n//       iziToast.warning({\n//            message: \"Sorry, there are no images matching your search query. Please try again!\",\n//             position: 'topRight',\n//             backgroundColor: '#ef4040',\n//             progressBar: false,\n//             messageColor: \"white\",\n//             icon: \"\",\n//             iconUrl: new URL('./img/error.svg', import.meta.url).href,\n//             close: false\n//         })\n//     }\n//     createGallery(data.hits); \n//   })\n//   .catch(error => {\n//       iziToast.error({\n//            message: \"Ooooops! Something went wrong\",\n//             position: 'topRight',\n//             backgroundColor: '#ef4040',\n//             progressBar: false,\n//             messageColor: \"white\",\n//             icon: \"\",\n//             iconUrl: new URL('./img/error.svg', import.meta.url).href,\n//             close: false\n//         })\n//   })\n//   .finally(() => {\n//     hideLoader();\n    \n//   })\n// }\n\n\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","data","axios","error","refs","galleryContainer","lightbox","SimpleLightbox","loader","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","hideLoadMoreButton","showLoadMoreButton","form","perPage","currentQuery","totalPages","handleClick","event","iziToast","loadMoreHandler","cardSize"],"mappings":"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"}